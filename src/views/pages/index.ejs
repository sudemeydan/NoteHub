<%- include('../partials/header') %>

<div class="hero-section mb-5">
    <img src="https://source.unsplash.com/random/1600x600?technology,coding,education" alt="Hero Background" class="hero-bg">
    <div class="hero-content">
        <h1 class="display-4">Geleceğinizi Kodlayın</h1>
        <p class="lead">Web geliştirme, yapay zeka ve daha fazlası hakkında güncel notlara ve derslere ulaşın.</p>
        <a href="#latest-notes" class="btn btn-primary btn-lg">Keşfetmeye Başla <i class="bi bi-arrow-right-short"></i></a>
    </div>
</div>

<div class="container mb-5">
    <div class="row">
        
        <div class="col-lg-9">
            <h2 class="section-title mb-4" id="latest-notes">Son Eklenen Notlar</h2>
            
            <div class="swiper mySwiper mb-5">
                <div class="swiper-wrapper">
                    <% if (latestNotes.length > 0) { %>
                        <% latestNotes.forEach((note, index) => { %>
                            <div class="swiper-slide">
                                <a href="/notlar/<%= note.id %>" class="note-card-small flex-column align-items-start p-3">
                                    <div class="card-img-container mb-3" style="width: 100%; height: 180px;">
                                        <img src="https://source.unsplash.com/random/400x200?note,programming,<%= note.Course.title %>&sig=<%= index %>" alt="<%= note.title %>" class="img-fluid" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                                        <span class="card-category"><%= note.Course.title %></span>
                                    </div>
                                    <h5 class="card-title w-100"><%= note.title %></h5>
                                </a>
                            </div>
                        <% }) %>
                    <% } else { %>
                        <div class="swiper-slide text-center p-4 text-muted">Henüz hiç not eklenmemiş.</div>
                    <% } %>
                </div>
                <div class="swiper-pagination"></div>
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            </div>

            <h2 class="section-title mt-5 mb-4">Ders Kategorileri</h2>
            <div class="course-icon-list justify-content-start">
                <% if (courses.length > 0) { %>
                    <% courses.forEach((course, index) => { %>
                        <a href="/dersler/<%= course.id %>" class="course-icon-item position-relative">
                            
                            <% if (!course.isPublic) { %>
                                <span class="position-absolute top-0 end-0 badge rounded-pill bg-warning text-dark m-1" title="Sadece Üyelere Özel" style="font-size: 0.6rem;">
                                    <i class="bi bi-lock-fill"></i>
                                </span>
                            <% } %>
                            
                            <% 
                                let iconClass = 'bi-folder-fill'; 
                                if (course.title.toLowerCase().includes('c#')) iconClass = 'bi-filetype-cs';
                                else if (course.title.toLowerCase().includes('node')) iconClass = 'bi-node-js';
                                else if (course.title.toLowerCase().includes('python')) iconClass = 'bi-filetype-py';
                                else if (course.title.toLowerCase().includes('web')) iconClass = 'bi-globe';
                                else if (course.title.toLowerCase().includes('java')) iconClass = 'bi-filetype-java';
                                else if (course.title.toLowerCase().includes('yapay zeka')) iconClass = 'bi-robot';
                            %>
                            <i class="bi <%= iconClass %> course-icon"></i>
                            <span class="course-title"><%= course.title %></span>
                        </a>
                    <% }) %>
                <% } else { %>
                    <p class="text-center text-muted col-12">Gösterilecek ders bulunamadı.</p>
                <% } %>
            </div>
        </div>

        <div class="col-lg-3">
            <div class="sidebar">
                <div class="sidebar-widget mb-4">
                    <form id="searchForm" class="d-flex" onsubmit="return false;">
                        <input type="text" class="form-control me-2" id="searchInput" placeholder="Notlarda ara..." aria-label="Search" autocomplete="off">
                        <button class="btn btn-primary" type="submit"><i class="bi bi-search"></i></button>
                    </form>
                    <div id="searchResults" class="search-results-list"></div>
                </div>

                <div class="sidebar-widget">
                    <h5 class="widget-title">Son Yazılar</h5>
                    <ul class="list-group list-group-flush">
                        <% if (latestNotes.length > 0) { %>
                            <% latestNotes.forEach(note => { %>
                                <li class="list-group-item">
                                    <a href="/notlar/<%= note.id %>"><%= note.title %></a>
                                </li>
                            <% }) %>
                        <% } else { %>
                            <li class="list-group-item text-muted">Henüz hiç not eklenmemiş.</li>
                        <% } %>
                    </ul>
                </div>

                <div class="sidebar-widget mt-4">
                    <h5 class="widget-title">Popüler Yazılar</h5>
                    <ul class="list-group list-group-flush">
                        <% if (popularNotes.length > 0) { %>
                            <% popularNotes.forEach(note => { %>
                                <li class="list-group-item">
                                    <a href="/notlar/<%= note.id %>"><%= note.title %></a>
                                </li>
                            <% }) %>
                        <% } else { %>
                            <li class="list-group-item text-muted">Henüz hiç popüler not bulunamadı.</li>
                        <% } %>
                    </ul>
                </div>

                <div class="sidebar-widget text-center mt-4">
                    <h5 class="widget-title">Bizi Takip Edin</h5>
                    <div class="social-icons-large">
                        <a href="#" target="_blank"><i class="bi bi-github"></i></a>
                        <a href="#" target="_blank"><i class="bi bi-linkedin"></i></a>
                        <a href="#" target="_blank"><i class="bi bi-twitter"></i></a>
                        <a href="#" target="_blank"><i class="bi bi-instagram"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<%- include('../partials/footer') %>